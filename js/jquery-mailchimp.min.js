!function(t){"use strict";t.fn.MailChimpForm=function(e){function r(e,r,n,o){t.ajax({url:e,dataType:"jsonp",contentType:"application/json",data:r,success:n,error:o})}function n(t){t.preventDefault(),t.stopPropagation()}return this.each(function(){function o(t,e){e?c[e].$errorEl.text(t):s.onFail(t)}function i(){for(let t in c)c[t].$errorEl.text("")}function l(){let t={};for(let e in c){let r=c[e];t[r.name]=r.$inputEl.val()}return t}let c={},u=t(this),s=t.extend({url:u.attr("action"),fields:"",errorSelector:".mc-error",submitSelector:"",onFail:function(t){console.error(t)},onOk:function(t){console.log(t)}},e),f=s.fields.split(",").map(t=>t.trim()),a=t(s.submitSelector);if(!s.url)throw new Error("Url must be specified!");f.map((t,e)=>{let r=u.find(`.mc-form-group-${t}`);c[e]={name:t,$inputEl:r.find("input"),$errorEl:r.find(s.errorSelector)}}),a.on("click",function(t){n(t),i(),event.preventDefault(),r(s.url.replace("/post?","/post-json?").concat("&c=?"),l(),function(t){if("error"===t.result){let e,r=t.msg;if(r.substr(1,4).indexOf("-")>=0){let n=t.msg.split("-").map(t=>t.trim());e=n[0],r=n[1]}o(r,e)}else"success"===t.result&&s.onOk(t.msg)},function(t){s.onFail("MailChip error occurred")})})})}}(jQuery);